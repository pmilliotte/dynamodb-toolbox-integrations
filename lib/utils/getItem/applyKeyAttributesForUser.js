"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.applyKeyAttributePropertiesForUser = void 0;
exports.applyKeyAttributePropertiesForUser = (entity) => {
    const { attributes } = entity.schema;
    const keyEntries = Object.entries(entity.attributes).filter(([key, value]) => !!value.partitionKey || !!value.sortKey);
    console.log("keyEntries", keyEntries);
    const params = keyEntries.reduce((tempParams, [attributeKey, _]) => {
        var _a, _b;
        const attributeMap = (_a = attributes[attributeKey].map) !== null && _a !== void 0 ? _a : attributeKey;
        const attributeAlias = (_b = attributes[attributeKey].alias) !== null && _b !== void 0 ? _b : attributeKey;
        return {
            ...tempParams,
            [`${attributeAlias}.$`]: `$.${attributeMap}`,
        };
    }, {});
    return params;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwbHlLZXlBdHRyaWJ1dGVzRm9yVXNlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImFwcGx5S2V5QXR0cmlidXRlc0ZvclVzZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRWEsUUFBQSxrQ0FBa0MsR0FBRyxDQUNoRCxNQUFjLEVBQ1csRUFBRTtJQUMzQixNQUFNLEVBQUUsVUFBVSxFQUFFLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUVyQyxNQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUMvQixNQUFNLENBQUMsVUFNTixDQUNGLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsWUFBWSxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFcEUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDdEMsTUFBTSxNQUFNLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFOztRQUNqRSxNQUFNLFlBQVksU0FBRyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUMsR0FBRyxtQ0FBSSxZQUFZLENBQUM7UUFDbEUsTUFBTSxjQUFjLFNBQUcsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssbUNBQUksWUFBWSxDQUFDO1FBQ3RFLE9BQU87WUFDTCxHQUFHLFVBQVU7WUFDYixDQUFDLEdBQUcsY0FBYyxJQUFJLENBQUMsRUFBRSxLQUFLLFlBQVksRUFBRTtTQUM3QyxDQUFDO0lBQ0osQ0FBQyxFQUFFLEVBQTZCLENBQUMsQ0FBQztJQUVsQyxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbnRpdHkgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IGFwcGx5S2V5QXR0cmlidXRlUHJvcGVydGllc0ZvclVzZXIgPSAoXG4gIGVudGl0eTogRW50aXR5XG4pOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9PiB7XG4gIGNvbnN0IHsgYXR0cmlidXRlcyB9ID0gZW50aXR5LnNjaGVtYTtcblxuICBjb25zdCBrZXlFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoXG4gICAgZW50aXR5LmF0dHJpYnV0ZXMgYXMgUmVjb3JkPFxuICAgICAgc3RyaW5nLFxuICAgICAge1xuICAgICAgICBwYXJ0aXRpb25LZXk/OiBzdHJpbmcgfCBib29sZWFuO1xuICAgICAgICBzb3J0S2V5Pzogc3RyaW5nIHwgYm9vbGVhbjtcbiAgICAgIH1cbiAgICA+XG4gICkuZmlsdGVyKChba2V5LCB2YWx1ZV0pID0+ICEhdmFsdWUucGFydGl0aW9uS2V5IHx8ICEhdmFsdWUuc29ydEtleSk7XG5cbiAgY29uc29sZS5sb2coXCJrZXlFbnRyaWVzXCIsIGtleUVudHJpZXMpO1xuICBjb25zdCBwYXJhbXMgPSBrZXlFbnRyaWVzLnJlZHVjZSgodGVtcFBhcmFtcywgW2F0dHJpYnV0ZUtleSwgX10pID0+IHtcbiAgICBjb25zdCBhdHRyaWJ1dGVNYXAgPSBhdHRyaWJ1dGVzW2F0dHJpYnV0ZUtleV0ubWFwID8/IGF0dHJpYnV0ZUtleTtcbiAgICBjb25zdCBhdHRyaWJ1dGVBbGlhcyA9IGF0dHJpYnV0ZXNbYXR0cmlidXRlS2V5XS5hbGlhcyA/PyBhdHRyaWJ1dGVLZXk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRlbXBQYXJhbXMsXG4gICAgICBbYCR7YXR0cmlidXRlQWxpYXN9LiRgXTogYCQuJHthdHRyaWJ1dGVNYXB9YCxcbiAgICB9O1xuICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik7XG5cbiAgcmV0dXJuIHBhcmFtcztcbn07XG4iXX0=