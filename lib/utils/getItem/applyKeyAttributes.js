"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.applyKeyAttributeProperties = void 0;
exports.applyKeyAttributeProperties = (entity) => {
    const { attributes } = entity.schema;
    const keyEntries = Object.entries(entity.attributes).filter(([key, value]) => !!value.partitionKey || !!value.sortKey);
    console.log("keyEntries", keyEntries);
    const params = keyEntries.reduce((tempParams, [attributeKey, _]) => {
        var _a, _b;
        const attributeMap = (_a = attributes[attributeKey].map) !== null && _a !== void 0 ? _a : attributeKey;
        const attributeAlias = (_b = attributes[attributeKey].alias) !== null && _b !== void 0 ? _b : attributeKey;
        return {
            ...tempParams,
            [`${attributeMap}.$`]: `$.${attributeAlias}`,
        };
    }, {});
    return params;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwbHlLZXlBdHRyaWJ1dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwbHlLZXlBdHRyaWJ1dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVhLFFBQUEsMkJBQTJCLEdBQUcsQ0FDekMsTUFBYyxFQUNXLEVBQUU7SUFDM0IsTUFBTSxFQUFFLFVBQVUsRUFBRSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7SUFFckMsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FDL0IsTUFBTSxDQUFDLFVBTU4sQ0FDRixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFlBQVksSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRXBFLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sTUFBTSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRTs7UUFDakUsTUFBTSxZQUFZLFNBQUcsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsbUNBQUksWUFBWSxDQUFDO1FBQ2xFLE1BQU0sY0FBYyxTQUFHLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxLQUFLLG1DQUFJLFlBQVksQ0FBQztRQUN0RSxPQUFPO1lBQ0wsR0FBRyxVQUFVO1lBQ2IsQ0FBQyxHQUFHLFlBQVksSUFBSSxDQUFDLEVBQUUsS0FBSyxjQUFjLEVBQUU7U0FDN0MsQ0FBQztJQUNKLENBQUMsRUFBRSxFQUE2QixDQUFDLENBQUM7SUFFbEMsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBhcHBseUtleUF0dHJpYnV0ZVByb3BlcnRpZXMgPSAoXG4gIGVudGl0eTogRW50aXR5XG4pOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9PiB7XG4gIGNvbnN0IHsgYXR0cmlidXRlcyB9ID0gZW50aXR5LnNjaGVtYTtcblxuICBjb25zdCBrZXlFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoXG4gICAgZW50aXR5LmF0dHJpYnV0ZXMgYXMgUmVjb3JkPFxuICAgICAgc3RyaW5nLFxuICAgICAge1xuICAgICAgICBwYXJ0aXRpb25LZXk/OiBzdHJpbmcgfCBib29sZWFuO1xuICAgICAgICBzb3J0S2V5Pzogc3RyaW5nIHwgYm9vbGVhbjtcbiAgICAgIH1cbiAgICA+XG4gICkuZmlsdGVyKChba2V5LCB2YWx1ZV0pID0+ICEhdmFsdWUucGFydGl0aW9uS2V5IHx8ICEhdmFsdWUuc29ydEtleSk7XG5cbiAgY29uc29sZS5sb2coXCJrZXlFbnRyaWVzXCIsIGtleUVudHJpZXMpO1xuICBjb25zdCBwYXJhbXMgPSBrZXlFbnRyaWVzLnJlZHVjZSgodGVtcFBhcmFtcywgW2F0dHJpYnV0ZUtleSwgX10pID0+IHtcbiAgICBjb25zdCBhdHRyaWJ1dGVNYXAgPSBhdHRyaWJ1dGVzW2F0dHJpYnV0ZUtleV0ubWFwID8/IGF0dHJpYnV0ZUtleTtcbiAgICBjb25zdCBhdHRyaWJ1dGVBbGlhcyA9IGF0dHJpYnV0ZXNbYXR0cmlidXRlS2V5XS5hbGlhcyA/PyBhdHRyaWJ1dGVLZXk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRlbXBQYXJhbXMsXG4gICAgICBbYCR7YXR0cmlidXRlTWFwfS4kYF06IGAkLiR7YXR0cmlidXRlQWxpYXN9YCxcbiAgICB9O1xuICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik7XG5cbiAgcmV0dXJuIHBhcmFtcztcbn07XG4iXX0=